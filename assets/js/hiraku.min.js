!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(r){var a,o={direction:"right",breakpoint:-1},f=0,d={x:window.scrollX,y:window.scrollY},c="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",s=0,u=function(){r(window).width()!==s&&(s=r(window).width(),r(".js-hiraku-offcanvas").each(function(){var a=r(this),s=r(this).data("breakpoint");a.hasClass("js-hiraku-offcanvas-open")&&(-1===s||s>=window.innerWidth)||(-1===s||s>=window.innerWidth?a.addClass("js-hiraku-offcanvas-active").attr("aria-hidden",!0):a.removeClass("js-hiraku-offcanvas-active").attr("aria-hidden",!1).trigger("click"))}))};r.fn.extend({hiraku:function(a){a=r.extend({},o,a);var s="js-hiraku-offcanvas-"+f,i=r(this),t=r(a.btn),n=r(a.fixedHeader);i.addClass("js-hiraku-offcanvas-sidebar").data("scroll",scroll),0===i.parent(".js-hiraku-offcanvas").length&&i.wrap('<div class="js-hiraku-offcanvas"/>'),i.attr("role","navigation");var e=i.parent(".js-hiraku-offcanvas");e.data("opt",a),e.attr("aria-hidden","true").attr("aria-labelledby","hiraku-offcanvas-btn-"+f).attr("id",s).data("breakpoint",a.breakpoint).attr("aria-label","close"),r("body").addClass("js-hiraku-offcanvas-body"),"right"==a.direction?i.addClass("js-hiraku-offcanvas-sidebar-right"):i.addClass("js-hiraku-offcanvas-sidebar-left"),a.btn&&t.addClass("js-hiraku-offcanvas-btn").attr("data-toggle-offcanvas","#"+s).attr("aria-expanded",!1).attr("aria-label","Menu").attr("aria-controls",s).attr("id","hiraku-offcanvas-btn-"+f),a.fixedHeader&&n.addClass("js-hiraku-header-fixed"),f++,u()}}),r(document).on("click",".js-hiraku-offcanvas-btn",function(a){var s=r(r(this).data("toggle-offcanvas"));r('<button type="button">Close Offcanvas-Menu Button</button>').attr("aria-label","Close").addClass("js-hiraku-offcanvas-close-btn").appendTo(s);var i=r(this),t=r("body").css({width:r(window).width(),height:r(window).height()}),n=s.find(".js-hiraku-offcanvas-sidebar"),e=s.find(c).first(),o=s.find(c).last();e.off("keydown.hiraku-offcanvas").on("keydown.hiraku-offcanvas",function(a){9===a.which&&a.shiftKey&&(a.preventDefault(),o.focus())}),o.off("keydown.hiraku-offcanvas").on("keydown.hiraku-offcanvas",function(a){9!==a.which||a.shiftKey||(a.preventDefault(),e.focus())}),o.off("click.hiraku-offcanvas").on("click.hiraku-offcanvas",function(){s.click()}),i.addClass("js-hiraku-offcanvas-btn-active").attr("aria-expanded",!0),d.x=window.scrollX,d.y=window.scrollY,s.attr("aria-hidden",!1).addClass("js-hiraku-offcanvas-open"),setTimeout(function(){r("html").css("marginTop",-1*window.scrollY),n.hasClass("js-hiraku-offcanvas-sidebar-right")?t.addClass("js-hiraku-offcanvas-body-right"):t.addClass("js-hiraku-offcanvas-body-left"),n.addClass("active"),e.focus()},1),a.preventDefault()}),r(document).on("click touchstart keyup",".js-hiraku-offcanvas",function(a){if(("keyup"!==a.type||27===a.keyCode)&&("keyup"===a.type&&(a.target=document.querySelector(".js-hiraku-offcanvas")),r(a.target).hasClass("js-hiraku-offcanvas"))){var s=r(this).data("opt");r(".js-hiraku-offcanvas-body").addClass("js-hiraku-offcanvas-body-moving").removeClass("js-hiraku-offcanvas-body-right").removeClass("js-hiraku-offcanvas-body-left"),r(".js-hiraku-offcanvas-sidebar").removeClass("active"),r("body").css({width:"",height:""}),setTimeout(function(){r(a.target).removeClass("js-hiraku-offcanvas-open").attr("aria-hidden",!0),r(".js-hiraku-offcanvas-body").removeClass("js-hiraku-offcanvas-body-moving"),r("html").css("marginTop",""),window.scrollTo(d.x,d.y),r(".js-hiraku-offcanvas-btn-active").removeClass("js-hiraku-offcanvas-btn-active").attr("aria-expanded",!1).focus(),r(a.target).find(".js-hiraku-offcanvas-close-btn").remove(),s&&s.onClose&&s.onClose()},300)}}),r(window).on("resize",function(){"requestAnimationFrame"in window?(cancelAnimationFrame(a),a=requestAnimationFrame(u)):u()})});