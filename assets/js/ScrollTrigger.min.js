!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.ScrollTrigger=t()}(this,function(){"use strict";return function(n,e,t){function i(e,t){this.element=t,this.defaultOptions=e,this.showCallback=null,this.hideCallback=null,this.visibleClass="visible",this.hiddenClass="invisible",this.addWidth=!1,this.addHeight=!1,this.once=!1;var n,i,l,s,o,a,c,r,d,h,f=0,u=0;this.left=(n=this,function(){return n.element.getBoundingClientRect().left}),this.top=(i=this,function(){return i.element.getBoundingClientRect().top}),this.xOffset=(l=this,function(e){var t=f;return l.addWidth&&!e?t+=l.width():e&&!l.addWidth&&(t-=l.width()),t}),this.yOffset=(s=this,function(e){var t=u;return s.addHeight&&!e?t+=s.height():e&&!s.addHeight&&(t-=s.height()),t}),this.width=(o=this,function(){return o.element.offsetWidth}),this.height=(a=this,function(){return a.element.offsetHeight}),this.reset=(c=this,function(){c.removeClass(c.visibleClass),c.removeClass(c.hiddenClass)}),this.addClass=(r=this).element.classList?function(e,t){r.element.classList.contains(e)||(r.element.classList.add(e),"function"==typeof t&&t())}:function(e,t){e=e.trim();var n=new RegExp("(?:^|\\s)"+e+"(?:(\\s\\w)|$)","ig"),i=r.element.className;n.test(i)||(r.element.className+=" "+e,"function"==typeof t&&t())},this.removeClass=(d=this).element.classList?function(e,t){d.element.classList.contains(e)&&(d.element.classList.remove(e),"function"==typeof t&&t())}:function(e,t){e=e.trim();var n=new RegExp("(?:^|\\s)"+e+"(?:(\\s\\w)|$)","ig"),e=d.element.className;n.test(e)&&(d.element.className=e.replace(n,"$1").trim(),"function"==typeof t&&t())},this.init=(h=this,function(){var e=h.defaultOptions,t=h.element.getAttribute("data-scroll");e&&(e.toggle&&e.toggle.visible&&(h.visibleClass=e.toggle.visible),e.toggle&&e.toggle.hidden&&(h.hiddenClass=e.toggle.hidden),e.showCallback&&(h.showCallback=e.showCallback),e.hideCallback&&(h.hideCallback=e.hideCallback),!0===e.centerHorizontal&&(f=h.element.offsetWidth/2),!0===e.centerVertical&&(u=h.element.offsetHeight/2),e.offset&&e.offset.x&&(f+=e.offset.x),e.offset&&e.offset.y&&(u+=e.offset.y),e.addWidth&&(h.addWidth=e.addWidth),e.addHeight&&(h.addHeight=e.addHeight),e.once&&(h.once=e.once));var n=-1<t.indexOf("addWidth"),i=-1<t.indexOf("addHeight"),e=-1<t.indexOf("once");!1===h.addWidth&&!0==n&&(h.addWidth=n),!1===h.addHeight&&!0==i&&(h.addHeight=i),!1===h.once&&!0==e&&(h.once=e),h.showCallback=h.element.hasAttribute("data-scroll-showCallback")?h.element.getAttribute("data-scroll-showCallback"):h.showCallback,h.hideCallback=h.element.hasAttribute("data-scroll-hideCallback")?h.element.getAttribute("data-scroll-hideCallback"):h.hideCallback;e=t.split("toggle(");1<e.length&&(e=e[1].split(")")[0].split(","),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),h.visibleClass=e[0].trim().replace(".",""),h.hiddenClass=e[1].trim().replace(".","")),-1<t.indexOf("centerHorizontal")&&(f=h.element.offsetWidth/2),-1<t.indexOf("centerVertical")&&(u=h.element.offsetHeight/2);t=t.split("offset(");return 1<t.length&&(t=t[1].split(")")[0].split(","),f+=parseInt(t[0].replace("px","")),u+=parseInt(t[1].replace("px",""))),h})}this.scrollElement=window,this.bindElement=document.body,this.callScope=window;var l,s,o,a,c,r,d,h,f=[],u=[],m={left:-1,top:-1},p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},g=!1,b=function(e,t,n){return l.bindElement=null!=t&&null!=t?t:document.body,l.scrollElement=null!=n&&null!=n?n:window,l.bind(l.bindElement.querySelectorAll("[data-scroll]")),l};(l=this).bind=(s=this,function(e){e instanceof HTMLElement&&(e=[e]);e=(e=[].slice.call(e)).map(function(e,t){return new i(n,e).init()});return 0<(f=f.concat(e)).length&&0==g?(g=!0,v()):g=!1,s}),this.triggerFor=function(n){var i=null;return f.each(function(e,t){e.element==n&&(i=e)}),i},this.destroy=(o=this,function(n){return f.each(function(e,t){e.element==n&&f.splice(t,1)}),o}),this.destroyAll=(a=this,function(){return f=[],a}),this.reset=(c=this,function(e){e=c.triggerFor(e);return null!=e&&(e.reset(),-1<(e=f.indexOf(e))&&f.splice(e,1)),c}),this.resetAll=(r=this,function(){return f.each(function(e,t){e.reset()}),f=[],r}),this.attach=(d=this,function(e){return u.push(e),g||(g=!0,v()),d}),this.detach=(h=this,function(e){e=u.indexOf(e);return-1<e&&u.splice(e,1),h});var C,w=this;function v(){var e=w.bindElement.scrollTop||document.documentElement.scrollTop,t=w.bindElement.scrollLeft||document.documentElement.scrollLeft;m.left==t&&m.top==e||w.scrollDidChange(),0<f.length||0<u.length?(g=!0,p(v)):g=!1}function x(e,t){var n=t.split("("),i=n[0];if(n=(n=1<n.length?-1<(n=n[1].split(")")[0]).indexOf("', '")?n.split("', '"):-1<n.indexOf("','")?n.split("','"):-1<n.indexOf('", "')?n.split('", "'):-1<n.indexOf('","')?n.split('","'):[n]:[]).map(function(e){'"'==(e+="")[0]&&(e=e.substr(1));"'"==e[0]&&(e=e.substr(1));'"'==e[e.length-1]&&(e=e.substr(0,e.length-1));"'"==e[e.length-1]&&(e=e.substr(0,e.length-1));return e}),"function"==typeof w.callScope[i])try{w.callScope[i].apply(e.element,n)}catch(e){try{w.callScope[i].apply(null,n)}catch(e){}}}return this.scrollDidChange=(C=this,function(){var l=C.scrollElement.innerWidth||C.scrollElement.offsetWidth,s=C.scrollElement.innerHeight||C.scrollElement.offsetHeight,o=C.bindElement.scrollTop||document.documentElement.scrollTop,a=C.bindElement.scrollLeft||document.documentElement.scrollLeft,c=[];f.each(function(e,t){var n=e.left(),i=e.top();m.left>a?n-=e.xOffset(!0):m.left<a&&(n+=e.xOffset(!1)),m.top>o?i-=e.yOffset(!0):m.top<o&&(i+=e.yOffset(!1)),n<l&&0<=n&&i<s&&0<=i?(e.addClass(e.visibleClass,function(){e.showCallback&&x(e,e.showCallback)}),e.removeClass(e.hiddenClass),e.once&&c.push(e)):(e.addClass(e.hiddenClass),e.removeClass(e.visibleClass,function(){e.hideCallback&&x(e,e.hideCallback)}))}),u.each(function(e){e.call(C,a,o,l,s)}),c.each(function(e){e=f.indexOf(e);-1<e&&f.splice(e,1)}),m.left=a,m.top=o}),Array.prototype.each=function(e){for(var t=this.length,n=0;n<t;n++){var i=this[n];i&&e(i,n)}},b(n,e,t)}});